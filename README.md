# SortSnap

画像ファイルを視覚的に並べ替え、統一された命名規則で一括リネーム・保存するGUIツール

## 概要

SortSnapは、大量の画像ファイルを効率的に整理するためのツールです。ドラッグ&ドロップで直感的に画像を並べ替え、連番などの統一されたファイル名で一括保存できます。

## 主な機能

### 動作モード
- **フォルダモード**: 既存フォルダ内の画像を読み込み、並べ替え・リネームして保存
- **新規フォルダ作成モード**: 複数の画像ファイルをドラッグ&ドロップし、新規フォルダを作成してリネーム保存

### 画像操作
- **サムネイル表示**: グリッド形式で画像を一覧表示
- **ドラッグ&ドロップ**: マウスで直感的に順序を変更
- **ソート機能**: ファイル名順（昇順/降順）でソート
- **Undo/Redo**: 最大50段階の履歴管理
- **サムネイルサイズ調整**: 100px〜400pxの範囲でサイズ変更可能

### リネーム機能
3つの命名規則テンプレート:
1. **連番のみ**: `001.jpg`, `002.jpg`, ...
2. **テキスト + 連番**: `MyImage_001.jpg`, `MyImage_002.jpg`, ...
3. **日付 + 連番**: `251006_001.jpg`, `251006_002.jpg`, ... (YYMMDD形式)

### その他の機能
- **JPG変換**: PNG画像をJPG形式に変換（品質調整可能）
- **設定の永続化**: 前回の設定を自動保存・復元
- **ログ機能**: 処理内容を自動記録（最新30件まで保持）

## 動作環境

- **Windows**: Windows 10/11 (64bit)
- **macOS**: macOS 11 Big Sur 以降
- **メモリ**: 最低 4GB RAM（推奨 8GB以上）
- **ストレージ**: 50MB以上の空き容量

## 対応ファイル形式

- **読み込み**: `.jpg`, `.jpeg`, `.png`
- **保存**: `.jpg`, `.png`

## インストール

### 必要な環境
- Python 3.10 以降

### セットアップ

1. リポジトリをクローン
```bash
git clone <repository-url>
cd SortSnap
```

2. 仮想環境を作成・アクティベート
```bash
# 仮想環境作成
python -m venv venv

# Windows
venv\Scripts\activate

# macOS/Linux
source venv/bin/activate
```

3. 依存関係をインストール
```bash
pip install -r requirements.txt
```

## 使い方

### アプリケーションの起動

```bash
python main.py
```

### 基本的な使い方

1. **フォルダを開く**: メニューの「ファイル」→「フォルダを開く」または `Ctrl+O`
2. **画像を並べ替える**: サムネイルをドラッグ&ドロップで移動
3. **リネーム設定**: 右パネルで命名規則を選択
4. **保存**: 「💾 保存」ボタンをクリック

### キーボードショートカット

#### ファイル操作
- `Ctrl+O` / `Cmd+O`: フォルダを開く
- `Ctrl+S` / `Cmd+S`: 保存実行

#### 編集
- `Ctrl+Z` / `Cmd+Z`: 元に戻す（Undo）
- `Ctrl+Shift+Z` / `Cmd+Shift+Z`: やり直し（Redo）
- `Ctrl+A` / `Cmd+A`: 全選択
- `Ctrl+D` / `Cmd+D`: 選択解除
- `Delete` / `Space`: 選択画像を削除

#### 表示
- `Ctrl++` / `Cmd++`: サムネイル拡大
- `Ctrl+-` / `Cmd+-`: サムネイル縮小
- `Ctrl+0` / `Cmd+0`: サムネイルサイズリセット

## ビルド（実行ファイル作成）

### Windows版

```bash
pyinstaller --name SortSnap --onefile --windowed main.py
```

### macOS版

```bash
pyinstaller --name SortSnap --onefile --windowed --osx-bundle-identifier com.yourname.sortsnap main.py
```

実行ファイルは `dist/` フォルダに生成されます。

## 設定ファイル

アプリケーションの設定は `config.json` に保存されます。
実行ファイルと同じディレクトリに自動生成されます。

### 主な設定項目
- ウィンドウサイズ・位置
- 前回のフォルダパス
- リネーム設定
- JPG変換設定
- サムネイルサイズ

## ログ

ログファイルは `logs/` フォルダに保存されます。

- **ファイル名**: `sortsnap_log_YYMMDD_HHMMSS.txt`
- **保持数**: 最新30件まで
- **アクセス**: メニューの「ヘルプ」→「ログフォルダを開く」

## 開発

### プロジェクト構造

```
SortSnap/
├── main.py                 # エントリーポイント
├── requirements.txt        # 依存関係
├── config.json            # 設定ファイル（実行時生成）
├── src/
│   ├── models/            # データモデル
│   ├── controllers/       # ビジネスロジック
│   ├── views/            # UI
│   └── utils/            # ユーティリティ
├── animations/           # アニメーション
│   ├── animations.csv
│   └── frames/
└── logs/                # ログ（実行時生成）
```

### 技術スタック

- **Python**: 3.10+
- **GUI**: PyQt6
- **画像処理**: Pillow
- **パッケージング**: PyInstaller

## 制約事項

- サブフォルダの再帰的読み込みは非対応
- 動画ファイル、GIF、BMP等は非対応
- EXIF情報は保持されません
- インターネット接続不要（オフライン動作）

## ライセンス

このプロジェクトは個人使用を想定しています。

## バージョン情報

- **バージョン**: 1.0.0
- **ビルド日**: 2025-10-06

## トラブルシューティング

### アプリケーションが起動しない
- Python 3.10以降がインストールされているか確認
- 依存関係が正しくインストールされているか確認: `pip list`
- ログファイルを確認

### 画像が読み込めない
- ファイル形式が対応しているか確認（.jpg, .jpeg, .png のみ）
- ファイルが破損していないか確認
- フォルダへのアクセス権限を確認

### 保存できない
- 出力先フォルダへの書き込み権限を確認
- ディスクの空き容量を確認
- ファイル名に不正な文字が含まれていないか確認

## お問い合わせ

問題が発生した場合は、ログファイルを確認してください。
メニューの「ヘルプ」→「ログフォルダを開く」からアクセスできます。
